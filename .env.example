# =============================================================================
# Aria API - Environment Configuration Template
# =============================================================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control!

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# PostgreSQL connection (use TrackLit's existing database in production)
DATABASE_URL=postgresql://username:password@hostname:5432/database_name

# Alternative format (if DATABASE_URL not used)
DB_HOST=your-postgres-host.postgres.database.azure.com
DB_PORT=5432
DB_NAME=tracklit_production
DB_USER=your_db_user
DB_PASSWORD=your_db_password
DB_SSL_MODE=require

# =============================================================================
# REDIS CACHE CONFIGURATION
# =============================================================================
# Azure Redis Cache (use TrackLit's existing Redis in production)
REDIS_URL=rediss://:your-redis-password@your-redis-host.redis.cache.windows.net:6380/0

# Alternative format (if REDIS_URL not used)
REDIS_HOST=your-redis-host.redis.cache.windows.net
REDIS_PORT=6380
REDIS_PASSWORD=your-redis-password
REDIS_DB=0
REDIS_SSL=true

# =============================================================================
# CELERY BACKGROUND TASKS
# =============================================================================
# Celery broker URL (same as Redis URL for caching)
CELERY_BROKER_URL=rediss://:your-redis-password@your-redis-host.redis.cache.windows.net:6380/0
CELERY_RESULT_BACKEND=rediss://:your-redis-password@your-redis-host.redis.cache.windows.net:6380/0

# Celery task settings
CELERY_TASK_TIME_LIMIT=300  # 5 minutes max per task
CELERY_WORKER_PREFETCH_MULTIPLIER=1
CELERY_WORKER_MAX_TASKS_PER_CHILD=100

# Active user criteria for background tasks
ACTIVE_USER_DAYS=90  # Users active in last N days
MAX_USERS_PER_TASK=1000  # Limit users processed per task

# =============================================================================
# AUTHENTICATION & SECURITY
# =============================================================================
# JWT configuration (should match TrackLit's JWT settings)
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24

# API Key for internal service-to-service calls
API_KEY_SECRET=your-api-key-secret

# Session secret (for compatibility with TrackLit)
SESSION_SECRET=your-session-secret

# =============================================================================
# OPENAI CONFIGURATION
# =============================================================================
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_MODEL=gpt-4o
OPENAI_MAX_TOKENS=4000

# =============================================================================
# AZURE SERVICES
# =============================================================================
# Application Insights for monitoring and logging
APPLICATIONINSIGHTS_CONNECTION_STRING=InstrumentationKey=your-instrumentation-key;IngestionEndpoint=https://your-region.in.applicationinsights.azure.com/

# Azure Key Vault (optional - for secure secret management)
AZURE_KEY_VAULT_URL=https://your-keyvault.vault.azure.net/

# Azure Speech Services (for voice interaction features)
AZURE_SPEECH_KEY=your-azure-speech-key
AZURE_SPEECH_REGION=eastus
SPEECH_LANGUAGE=en-US
SPEECH_VOICE_NAME=en-US-AriaNeural

# =============================================================================
# STRIPE PAYMENT PROCESSING
# =============================================================================
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key
STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret

# Stripe price IDs for subscription tiers
STRIPE_PRICE_ID_PRO=price_your_pro_monthly_price_id
STRIPE_PRICE_ID_STAR=price_your_star_monthly_price_id

# =============================================================================
# TERRA API (WEARABLE INTEGRATIONS)
# =============================================================================
TERRA_API_KEY=your-terra-api-key
TERRA_DEV_ID=your-terra-dev-id
TERRA_WEBHOOK_SECRET=your-terra-webhook-secret
TERRA_API_URL=https://api.tryterra.co

# =============================================================================
# CORS CONFIGURATION
# =============================================================================
# Comma-separated list of allowed origins
ALLOWED_ORIGINS=https://tracklit.app,https://www.tracklit.app,https://api.tracklit.app

# For development, add localhost
# ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080,https://tracklit.app

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================
# Environment: development, staging, production
ENVIRONMENT=production

# Logging level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Number of Uvicorn workers (for production deployment)
WORKERS=4

# API rate limiting
RATE_LIMIT_ENABLED=true

# =============================================================================
# TRACKLIT INTEGRATION
# =============================================================================
# TrackLit API endpoint for cross-service communication
TRACKLIT_API_URL=https://api.tracklit.app
TRACKLIT_API_KEY=your-tracklit-internal-api-key

# TrackLit webhook secret for verifying incoming webhooks
TRACKLIT_WEBHOOK_SECRET=your-tracklit-webhook-secret

# TrackLit webhook URL (for Aria to notify TrackLit of events)
TRACKLIT_WEBHOOK_URL=https://api.tracklit.app/webhooks/Aria

# =============================================================================
# OPTIONAL: LOCAL DEVELOPMENT OVERRIDES
# =============================================================================
# Uncomment for local development with docker-compose

# DATABASE_URL=postgresql://Aria:Aria_dev_password@localhost:5432/Aria_dev
# REDIS_URL=redis://localhost:6379/0
# ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080
# ENVIRONMENT=development
# LOG_LEVEL=DEBUG
# WORKERS=2
